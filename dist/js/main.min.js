/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__accordeon__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__feeds__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__form__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__hamburger_menu__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__modal__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__onePageScroll__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__slider__ = __webpack_require__(7);

/*-----Импорты модулей-----*/








// проверка с какого браузера сидит пользователь
const md = new MobileDetect(window.navigator.userAgent);

// создание нового объекта от конструктора OnaPageScroll
console.log(__WEBPACK_IMPORTED_MODULE_5__onePageScroll__["a" /* default */]);
let OPS = new __WEBPACK_IMPORTED_MODULE_5__onePageScroll__["a" /* default */](
  {
    querySelectorWrapper: ".wrapper",
    queryOPSList: ".maincontent",
    queryOPSItems: ".section",
    OPScurrnetItem: 0,
    querySelectorPagination: ".pagination",
    querySelectorPaginationItem: ".pagination__item"
  },
  md
);

// иницилизация его (в нее входит проверка наличия элементов на странице, а также установка обработчика на document)
OPS.init();

/*-----Аккордеон для секции team------*/
(function() {
  var teamAccordeon = document.getElementById("team__accordeon");

  if (teamAccordeon) {
    teamAccordeon.addEventListener(
      "click",
      Object(__WEBPACK_IMPORTED_MODULE_0__accordeon__["a" /* default */])(".team__accordeon-item", "team__accordeon-item--active")
    );
    teamAccordeon.addEventListener(
      "thouchstart",
      Object(__WEBPACK_IMPORTED_MODULE_0__accordeon__["a" /* default */])(".team__accordeon-item", "team__accordeon-item--active")
    );
  }
})();

/*-----Аккордеон для секции menu------*/
(function() {
  let menu = document.getElementById("menu");

  if (menu) {
    menu.addEventListener(
      "click",
      Object(__WEBPACK_IMPORTED_MODULE_0__accordeon__["a" /* default */])(".menu__item", "menu__item--active")
    );
  }
})();

//иницилизация отзывов
Object(__WEBPACK_IMPORTED_MODULE_1__feeds__["a" /* default */])(__WEBPACK_IMPORTED_MODULE_4__modal__["a" /* default */]);
//иницилизация формы
Object(__WEBPACK_IMPORTED_MODULE_2__form__["a" /* default */])(__WEBPACK_IMPORTED_MODULE_4__modal__["a" /* default */]);
//иницилизация формы
Object(__WEBPACK_IMPORTED_MODULE_3__hamburger_menu__["a" /* default */])();
//иницилизация слайдера
Object(__WEBPACK_IMPORTED_MODULE_6__slider__["a" /* default */])(md);

// подключение яндекс карт
(function() {
  ymaps.ready(init);

  function init() {
    let myMap = new ymaps.Map("map", {
      center: [59.92835943, 30.32644111],
      zoom: 12,
      controls: []
    });
    let marker = "/img/map-marker.png";

    myMap.behaviors.disable("scrollZoom");

    let coords = [
        [59.95415993442389, 30.412447935989327],
        [59.9444854, 30.38450602],
        [59.88751101, 30.32545451],
        [59.90993322, 30.49436931]
      ],
      myCollection = new ymaps.GeoObjectCollection(
        {},
        {
          iconLayout: "default#image",
          iconImageHref: marker,
          iconImageSize: [46, 57],
          iconImageOffset: [-24, -54]
        }
      );

    for (var i = 0; i < coords.length; i++) {
      myCollection.add(new ymaps.Placemark(coords[i]));
    }

    myMap.geoObjects.add(myCollection);
  }
})();


/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = accordeonInit;
function accordeonInit(
  classAccordeonItem,
  classAccordeonActiveItem
) {
  return function accordeonIt(e) {
    e.preventDefault();
    var $this = this,
      accordeonItems = $this.children,
      target = e.target,
      accordeonItem = target.closest(classAccordeonItem);

    // имеет или нет кликнутый элемент активный класс?
    if (accordeonItem.classList.contains(classAccordeonActiveItem)) {
      //если имеет то скрыть
      accordeonItem.classList.remove(classAccordeonActiveItem);
    } else {
      //если не имеет то есть два варианта
      //1) если есть у друго элемента, то найти его и скрыть;
      //2) если нет ни у кого то просто откыть кликнутый;
      // и там и там открываем кликнутый
      if ($this.querySelector(`.${classAccordeonActiveItem}`)) {
        $this
          .querySelector(`.${classAccordeonActiveItem}`)
          .classList.remove(classAccordeonActiveItem);
      }
      accordeonItem.classList.add(classAccordeonActiveItem);
    }
  };
}


/***/ }),
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = feedsInit;
// принимает фукнцию которая открывает модальное окно
function feedsInit(modalOpen) {
  // иницализуруем у каждого объекта dotdotdot с параметрами
  $(".feeds__desc").each((index, item) => {
    $(item).dotdotdot({
      keep: ".feeds__more-info"
    });
  });

  (function() {
    let feeds_section = document.querySelector(".feeds-section");
    let feeds__text, feeds__title;
    //модалка для отзывов
    if (feeds_section) {
      // обработчик на всю секцию если нажали на кнопку
      feeds_section.addEventListener("click", e => {
        e.preventDefault();
        let target = e.target;
        //обработчик на кнопку "подробнее"
        if (target.classList.contains("feeds__more-info")) {
          // находим для кликнутого элемента его api у dotdotdot
          let dotdotdotApi = $(target)
            .siblings(".feeds__desc")
            .data("dotdotdot");
          // разворачиваем весь текст чтобы его скопировать (	When truncated, restore )
          dotdotdotApi.restore();
          // формируем текст для модалки
          feeds__text = target
            .closest(".feeds__hided")
            .querySelector(".feeds__desc").textContent;
          feeds__title = target
            .closest(".feeds__hided")
            .querySelector(".feeds__title").textContent;
          // вызываем функцию модалку
          modalOpen(".modal__feeds", feeds__title, feeds__text);
          // Сворачивам обратно текст чтобы он стал с  тремя точками  (Not truncated, truncate)
          dotdotdotApi.truncate();
          // даем плагину команду чтобы следил за изменением монитора и либо увеличивал, либо уменьшал слова в блоке
          dotdotdotApi.watch();
        }
      });
    }
  })();
}


/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = formInit;
// принимает фукнцию которая открывает модальное окно
function formInit(modalOpen) {
  //только в этом файле для упращения ajax используется jquery (его нужно переписать на нативный js)

  let submitForm = e => {
    e.preventDefault();
    let form = $(e.target);
    let data = $(e.target).serialize();
    let url = form.attr("action");
    console.log(form);
    console.log(data);
    console.log(url);

    let req = $.ajax("order.php", {
      type: "POST",
      url: url,
      data: data,
      dataType: "JSON"
    });

    req.done(response => {
      console.log("in done");
      let message = response.message,
        status = response.status;
      //отправка сообщения в модальное окно
      modalOpen(".modal__form", response.status, response.message);
      //отчистка формы
      document.getElementById("order-form").reset();
    });

    req.fail(function(jqXHR, textStatus) {
      alert("request failed: " + textStatus);
    });
  };

  $("#order-form").on("submit", submitForm);
}


/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = hamburgerMenu;
function hamburgerMenu() {
  var hamMenu = document.querySelector(".hamburger");
  if (hamMenu) {
    hamMenu.addEventListener("click", function(e) {
      e.preventDefault();
      document
        .querySelector(".hamburger-menu")
        .classList.toggle("hamburger-menu--active");
      document.querySelector(".logo").classList.toggle("logo--active");
      document
        .querySelector(".hamburger")
        .classList.toggle("hamburger--active");
      document
        .querySelector(".pagination")
        .classList.toggle("pagination--active");
      document.querySelector("body").classList.toggle("body--active");
      //класс чтобы не было скролла
      document
        .querySelector(".maincontent")
        .classList.toggle("maincontent--active-menu");
    });
  }
}


/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = modalOpen;
/**
 * Открывает модальное окно исходя из переданных параметров.
 * @param {string} modalName - Query селектор модалки, зависит от секции.
 * @param {string} modalTitle - Текст тайтла модалки.
 * @param {string} modalText - Текст тела модалки.
 */

function modalOpen(modalName, modalTitle, modalText) {
  modalName = document.querySelector(modalName);
  //отображаем модалку
  modalName.style.display = "block";
  //добавляем текст в модалку
  modalName.querySelector(".modal__title").innerHTML = modalTitle;
  modalName.querySelector(".modal__text").innerHTML = modalText;
  //после открытия модалки для закрытия  ее вешаем обработчик на секцию
  let isDisplay = e => {
    if (modalName.style.display === "block") {
      modalName.style.display = "none";
      modalName.closest(".section").removeEventListener("click", isDisplay);
    }
  };
  modalName.closest(".section").addEventListener("click", isDisplay);
  //обработчик на крестик закрытия
  modalName.querySelector(".modal__exit").addEventListener("click", () => {
    modalName.style.display = "none";
  });
}


/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = OnePageScroll;

/**
 * Создает новый объект для onepagescroll
 * @param {Object} options - объект, который описывает все параметры onepagescroll.
 * @param {string} options.querySelectorWrapper - query селектор враппера, который должен строять на месте.
 * @param {string} options.queryOPSList - query селектор списка, который будет двигаться абсолютом.
 * @param {string} options.queryOPSItems - query селектор итемов списка.
 * @param {number} options.OPScurrnetItem - начальная позиция слайдера.
 * @param {number} options.querySelectorPagination - query селектор списка пагинации (или любого другого индикатора).
 * @param {number} options.querySelectorPaginationItem - query селектор точек(итемов) пагинации (или любого другого индикатора).
 * @param {boolean} md - переменная которая говрит с какого устройсва сидит пользователь.
 */

function OnePageScroll(options = {}, md) {
  //св ва для onepagescroll как для слайдера
  this.wrapper = document.querySelector(options.querySelectorWrapper);
  this.OPSList = this.wrapper.querySelector(options.queryOPSList);
  this.OPSItems = this.wrapper.querySelectorAll(options.queryOPSItems);
  this.OPScurrnetItem = options.OPScurrnetItem || 0;

  // св ва для пагинации(точки сбоку)
  this.pagination = document.querySelector(options.querySelectorPagination);
  this.paginationItems = this.wrapper.querySelectorAll(
    options.querySelectorPaginationItem
  );

  //метод иницализации слайдера
  this.init = () => {
    //проверка что оболочка для onepagescroll есть
    if (this.wrapper) {
      if (md.mobile()) {
        document.addEventListener("touchstart", this.mobileListener);
        document.addEventListener("touchend", this.mobileListener);
        document.addEventListener("touchmove", this.mobileListener);
      } else {
        this.wrapper.addEventListener("wheel", this.pcListener);
        document.addEventListener("keydown", this.pcListener);
        document.addEventListener("touchmove", this.pcListener);
        document.addEventListener("click", this.pcListener);
      }
    }
  };

  // метод возвращающий новый индекс в зависимотсти от произошедшего события
  this.nextItem = item => {
    if (this.objEvent.target.getAttribute("data-scroll-to")) {
      item = +this.objEvent.target.getAttribute("data-scroll-to");
    }
    if (
      this.objEvent.deltaY > 0 ||
      this.objEvent.keyCode == 40 ||
      this.direction == "down"
    ) {
      this.objEvent.preventDefault();
      item != this.OPSItems.length - 1 ? (item = item + 1) : void 0;
    }
    if (
      this.objEvent.deltaY < 0 ||
      this.objEvent.keyCode == 38 ||
      this.direction == "up"
    ) {
      this.objEvent.preventDefault();
      item != 0 ? (item = item - 1) : void 0;
    }
    return item;
  };

  // функция которая перемещает слайды в зависимоти от index
  this.moveTo = index => {
    this.OPSList.style.top = -index * 100 + "%";
  };

  // функция изменения активного класса на секциях слайдера
  this.changeSectionActiveClasses = sectionActiveClass => {
    this.wrapper
      .querySelector(`.${sectionActiveClass}`)
      .classList.remove(sectionActiveClass);
    this.OPSItems[this.OPScurrnetItem].classList.add(sectionActiveClass);
  };

  // функция изменения активного класса на пагинации
  this.changePaginationActiveClasses = paginationActiveClass => {
    this.pagination
      .querySelector(`.${paginationActiveClass}`)
      .classList.remove(paginationActiveClass);
    this.paginationItems[this.OPScurrnetItem].classList.add(
      paginationActiveClass
    );
  };

  // обработчик для мобильника
  this.mobileListener = e => {
    //записываю в объект  - объект события, чтобы другие фукнции могли его тоже взять из объекта
    this.objEvent = e;

    // сначала сохраняем значение первого тыка
    if (this.objEvent.type == "touchstart") {
      this.ts = this.objEvent.touches["0"].clientY;
    }
    // потом сохраняем второго и тут же сравниваем и делаем смещение onepagescroll
    if (this.objEvent.type == "touchend") {
      this.te = this.objEvent.changedTouches["0"].clientY;

      // условие чтобы при малейшем свайпе не листался ops
      // deltaOPS определяет порог через который свой будет произведен
      this.deltaOPS = 200;
      if (Math.abs(this.ts - this.te) > this.deltaOPS) {
        this.ts > this.te ? (this.direction = "down") : (this.direction = "up");
      } else {
        this.direction = void 0;
      }

      //строка вызывающас функция, которая изменяющет переменную текущего слайда  (для мобилок: сравниваем со старым и делаем перемещение)
      this.OPScurrnetItem = this.nextItem(this.OPScurrnetItem);

      // изменяем активный класс на секции
      this.changeSectionActiveClasses("section--active");

      // изменяем активный класс на пагинации
      this.changePaginationActiveClasses("pagination__item--active");

      // вызов функции которая премещает список с section
      this.moveTo(this.OPScurrnetItem);
    }
  };

  // обработчик на слайдер для pc
  this.pcListener = e => {
    // записываю в объект - таргет события, чтобы другие функции в объекте могли его взять из объкта
    this.target = e.target;
    //записываю в объект  - объект события, чтобы другие фукнции могли его тоже взять из объекта
    this.objEvent = e;
    //переменная чтобы не потерять контекст вызова функции в setTimeout
    let $this = this;

    //строка вызывающас функция, которая изменяющет переменную текущего слайда  (для мобилок: сравниваем со старым и делаем перемещение)
    this.OPScurrnetItem = this.nextItem(this.OPScurrnetItem);

    // изменяем активный класс на секции
    this.changeSectionActiveClasses("section--active");

    // изменяем активный класс на пагинации
    this.changePaginationActiveClasses("pagination__item--active");

    //убираем активные классы с выпадающего меню (если клик был по нему)
    if (this.target.classList.contains("hamburger-menu__link")) {
      document
        .querySelector(".hamburger-menu--active")
        .classList.remove("hamburger-menu--active");
      document
        .querySelector(".hamburger--active")
        .classList.remove("hamburger--active");
      document.querySelector(".logo--active").classList.remove("logo--active");
      document
        .querySelector(".pagination--active")
        .classList.remove("pagination--active");
      //класс чтобы не было скролла
      document
        .querySelector(".maincontent")
        .classList.remove("maincontent--active-menu");
    }

    // вызов функции которая премещает список с section
    this.moveTo(this.OPScurrnetItem);

    // удаляем обработчик с через время ставим его опять,
    // для того чтобы событие не срабатывало много раз при прокрутке мышкой или тачпадом
    this.wrapper.removeEventListener("wheel", this.pcListener);
    setTimeout(function() {
      $this.wrapper.addEventListener("wheel", $this.pcListener);
    }, 1000);
    // функция убирает ops
    this.remove = () => {
      if (this.wrapper) {
        if (md.mobile()) {
          document.removeEventListener("touchstart", this.mobileListener);
          document.removeEventListener("touchend", this.mobileListener);
          document.removeEventListener("touchmove", this.mobileListener);
        } else {
          this.wrapper.removeEventListener("wheel", this.pcListener);
          document.removeEventListener("keydown", this.pcListener);
          document.removeEventListener("touchmove", this.pcListener);
          document.removeEventListener("click", this.pcListener);
        }
      }
    };
  };
}


/***/ }),
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = sliderInit;
function sliderInit(md) {
  let slider = document.querySelector(".slider"),
    currnetItem = 0;

  let sliderListener = e => {
    let $this = this,
      sliderWrap = slider.querySelector(".slider__wrap"),
      sliderList = slider.querySelector(".slider__list"),
      sliderItems = slider.querySelectorAll(".slider__item"),
      target = e.target;

    function nextCurrentItem(currnetItem) {
      if (
        target.classList.contains("slider__right-button") ||
        target.classList.contains("slider__right-arrow")
      ) {
        currnetItem != sliderItems.length - 1
          ? currnetItem++
          : (currnetItem = 0);
      }

      if (
        target.classList.contains("slider__left-button") ||
        target.classList.contains("slider__left-arrow")
      ) {
        currnetItem != 0
          ? currnetItem--
          : (currnetItem = sliderItems.length - 1);
      }

      return currnetItem;
    }

    currnetItem = nextCurrentItem(currnetItem);

    sliderWrap
      .querySelector(".slider__item--active")
      .classList.remove("slider__item--active");
    sliderItems[currnetItem].classList.add("slider__item--active");
    sliderList.style.left = -currnetItem * 100 + "%";
  };

  if (slider) {
    if (md.mobile()) {
      slider.addEventListener("touchstart", sliderListener);
    } else {
      slider.addEventListener("click", sliderListener);
    }
  }
}


/***/ })
/******/ ]);